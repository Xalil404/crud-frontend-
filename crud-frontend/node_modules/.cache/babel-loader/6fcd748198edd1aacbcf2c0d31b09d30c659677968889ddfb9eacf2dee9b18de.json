{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,Outlet,useLocation,useNavigate}from'react-router-dom';import{fetchUserProfile}from'../services/api';// Import the API function\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{const location=useLocation();const[userProfile,setUserProfile]=useState(null);// State to store user profile\nconst[error,setError]=useState(null);// To store any error messages\nconst token=localStorage.getItem('authToken');// Retrieve token from local storage\nconst navigate=useNavigate();// Initialize navigate function\n// Load user profile when the component mounts\nuseEffect(()=>{const loadProfile=async()=>{try{const profileData=await fetchUserProfile(token);setUserProfile(profileData);// Set user profile\n}catch(err){setError(err.detail||'Error fetching user profile');console.error('Error fetching user profile:',err);}};loadProfile();// Call the fetch function when component mounts\n},[token]);// Dependencies: token\nconst handleLogout=()=>{// Redirect to the Logout component\nnavigate('/logout');};// Determine the background class based on the current route\nconst getClassName=()=>{return location.pathname==='/birthdays'?'body-birthdays':'';};return/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-background\",children:/*#__PURE__*/_jsxs(\"div\",{className:`container-fluid ${getClassName()}`,children:[error&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red'},children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"nav\",{className:\"col-md-2 d-none d-md-block sidebar\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"sidebar-heading text-center\",children:\"Menu\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"nav flex-column\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{className:\"nav-link\",to:\"/dashboard\",children:\"Dashboard\"})}),/*#__PURE__*/_jsx(\"hr\",{className:\"divider\"}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{className:\"nav-link\",to:\"/birthdays\",children:\"Birthdays\"})}),/*#__PURE__*/_jsx(\"hr\",{className:\"divider\"}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{className:\"nav-link\",to:\"/anniversaries\",children:\"Anniversaries\"})}),/*#__PURE__*/_jsx(\"hr\",{className:\"divider\"}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{className:\"nav-link\",to:\"/holidays\",children:\"Holidays\"})}),/*#__PURE__*/_jsx(\"hr\",{className:\"divider\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-user-info mt-4 text-center\",children:[userProfile&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Welcome, \",userProfile.username,\"! (ID: \",userProfile.id,\")\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"btn btn-sm btn-danger\",children:\"Logout\"})]})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"col-md-9 ms-sm-auto col-lg-10 px-4 d-flex flex-column justify-content-center\",style:{minHeight:'80vh'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-4 d-flex align-items-center justify-content-center\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://res.cloudinary.com/dnbbm9vzi/image/upload/v1729505462/static/favicon_io/apple-touch-icon.234aad4ee54e.png\",alt:\"Logo\",style:{width:'50px',height:'50px',marginRight:'10px'}}),/*#__PURE__*/_jsx(\"h1\",{className:\"d-inline mb-0\",children:\"Dates\"})]}),location.pathname==='/dashboard'&&/*#__PURE__*/_jsxs(\"div\",{className:\"row align-items-center justify-content-center\",style:{flex:1},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mb-3 fw-bold\",children:\"Welcome to DATES!\"}),/*#__PURE__*/_jsx(\"h6\",{className:\"fw-bold\",children:\"Keep your most important birthdays, anniversaries & holidays all in one place.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 text-center\",children:/*#__PURE__*/_jsx(\"img\",{src:\"https://res.cloudinary.com/dnbbm9vzi/image/upload/v1729520568/Group_27_yp99rq.png\",alt:\"Welcome\",className:\"img-fluid\",style:{maxWidth:'100%',height:'auto'}})})]}),/*#__PURE__*/_jsx(Outlet,{context:{userProfile,handleLogout}})]})]})]})});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","Link","Outlet","useLocation","useNavigate","fetchUserProfile","jsx","_jsx","jsxs","_jsxs","Dashboard","location","userProfile","setUserProfile","error","setError","token","localStorage","getItem","navigate","loadProfile","profileData","err","detail","console","handleLogout","getClassName","pathname","className","children","style","color","to","username","id","onClick","minHeight","src","alt","width","height","marginRight","flex","maxWidth","context"],"sources":["/Users/test/crud-frontend-/crud-frontend/src/components/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link, Outlet, useLocation, useNavigate } from 'react-router-dom';\nimport { fetchUserProfile } from '../services/api'; // Import the API function\n\nconst Dashboard = () => {\n    const location = useLocation();\n    const [userProfile, setUserProfile] = useState(null); // State to store user profile\n    const [error, setError] = useState(null); // To store any error messages\n    const token = localStorage.getItem('authToken'); // Retrieve token from local storage\n    const navigate = useNavigate(); // Initialize navigate function\n\n    // Load user profile when the component mounts\n    useEffect(() => {\n        const loadProfile = async () => {\n            try {\n                const profileData = await fetchUserProfile(token);\n                setUserProfile(profileData); // Set user profile\n            } catch (err) {\n                setError(err.detail || 'Error fetching user profile');\n                console.error('Error fetching user profile:', err);\n            }\n        };\n\n        loadProfile(); // Call the fetch function when component mounts\n    }, [token]); // Dependencies: token\n\n    const handleLogout = () => {\n        // Redirect to the Logout component\n        navigate('/logout');\n    };\n\n    // Determine the background class based on the current route\n    const getClassName = () => {\n        return location.pathname === '/birthdays' ? 'body-birthdays' : '';\n    };\n\n    return (\n        <div className='dashboard-background'>\n            <div className={`container-fluid ${getClassName()}`}>\n              {/* Show error message if it exists */}\n              {error && <div style={{ color: 'red' }}>{error}</div>}\n                <div className=\"row\">\n                    {/* Sidebar */}\n                    <nav className=\"col-md-2 d-none d-md-block sidebar\">\n                        <h2 className=\"sidebar-heading text-center\">Menu</h2>\n                        <ul className=\"nav flex-column\">\n                            <li className=\"nav-item\">\n                                <Link className=\"nav-link\" to=\"/dashboard\">Dashboard</Link>\n                            </li>\n                            <hr className=\"divider\" />\n                            <li className=\"nav-item\">\n                                <Link className=\"nav-link\" to=\"/birthdays\">Birthdays</Link>\n                            </li>\n                            <hr className=\"divider\" />\n                            <li className=\"nav-item\">\n                                <Link className=\"nav-link\" to=\"/anniversaries\">Anniversaries</Link>\n                            </li>\n                            <hr className=\"divider\" />\n                            <li className=\"nav-item\">\n                                <Link className=\"nav-link\" to=\"/holidays\">Holidays</Link>\n                            </li>\n                            <hr className=\"divider\" />\n                        </ul>\n                        \n                        {/* User Info and Logout Section */}\n                        <div className=\"sidebar-user-info mt-4 text-center\">\n                            {userProfile && (\n                                <p>Welcome, {userProfile.username}! (ID: {userProfile.id})</p>\n                            )}\n                            <button \n                                onClick={handleLogout} \n                                className=\"btn btn-sm btn-danger\"\n                            >\n                                Logout\n                            </button>\n                        </div>\n                    </nav>\n\n                    {/* Main Content */}\n                    <main className=\"col-md-9 ms-sm-auto col-lg-10 px-4 d-flex flex-column justify-content-center\" style={{ minHeight: '80vh' }}>\n                        <div className=\"text-center mb-4 d-flex align-items-center justify-content-center\">\n                            <img\n                                src=\"https://res.cloudinary.com/dnbbm9vzi/image/upload/v1729505462/static/favicon_io/apple-touch-icon.234aad4ee54e.png\"\n                                alt=\"Logo\"\n                                style={{ width: '50px', height: '50px', marginRight: '10px' }}\n                            />\n                            <h1 className=\"d-inline mb-0\">Dates</h1>\n                        </div>\n\n                        {/* Welcome section for the homepage */}\n                        {location.pathname === '/dashboard' && (\n                            <div className=\"row align-items-center justify-content-center\" style={{ flex: 1 }}>\n                                <div className=\"col-md-6\">\n                                    <h1 className=\"mb-3 fw-bold\">Welcome to DATES!</h1>\n                                    <h6 className=\"fw-bold\">Keep your most important birthdays, anniversaries & holidays all in one place.</h6>\n                                </div>\n                                <div className=\"col-md-6 text-center\">\n                                    <img\n                                        src=\"https://res.cloudinary.com/dnbbm9vzi/image/upload/v1729520568/Group_27_yp99rq.png\"\n                                        alt=\"Welcome\"\n                                        className=\"img-fluid\"\n                                        style={{ maxWidth: '100%', height: 'auto' }}\n                                    />\n                                </div>\n                            </div>\n                        )}\n\n                        {/* Render child routes */}\n                        <Outlet context={{ userProfile, handleLogout }} />\n                    </main>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default Dashboard;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}